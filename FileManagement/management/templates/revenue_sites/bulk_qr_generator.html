{% extends 'base.html' %}
{% load i18n %}

{% block content %}
<div class="card">
    <div class="card-header">
        <div class="d-flex justify-content-between align-items-center">
            <h3 class="card-title">{% trans 'Bulk QR Code Generator' %}</h3>
            <form method="post" action="{% url 'bulk_qr_generator' %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-download"></i> {% trans 'Generate PDF' %}
                </button>
            </form>
        </div>
    </div>
    <div class="card-body">
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th width="5%">
                        <input type="checkbox" id="select-all">
                    </th>
                    <th>{% trans 'Full Name' %}</th>
                    <th>{% trans 'File No.' %}</th>
                    <th>{% trans 'Ward' %}</th>
                    <th>{% trans 'Drawer' %}</th>
                    <th>{% trans 'Compartment' %}</th>
                    <th>{% trans 'Document Type' %}</th>
                    <th>{% trans 'Inward Date' %}</th>
                </tr>
            </thead>
            <tbody>
                {% for site in sites %}
                <tr>
                    <td>
                        <input type="checkbox" name="selected_sites" value="{{ site.pk }}">
                    </td>
                    <td>{{ site.full_name }}</td>
                    <td>{{ site.file_no|default:'N/A' }}</td>
                    <td>{{ site.ward.ward_number|default:"N/A" }}</td>
                    <td>{{ site.drawer.drawer_number|default:"N/A" }}</td>
                    <td>{{ site.compartment.compartment_number|default:"N/A" }}</td>
                    <td>{{ site.document_title|default:'Revenue Site' }}</td>
                    <td>{{ site.registration_date|date:'d-m-Y' }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center">{% trans 'No revenue sites found.' %}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Select all checkbox functionality
    document.getElementById('select-all').addEventListener('change', function() {
        const checkboxes = document.querySelectorAll('input[name="selected_sites"]');
        checkboxes.forEach(checkbox => {
            checkbox.checked = this.checked;
        });
    });
});
</script>
{% endblock %}